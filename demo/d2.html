<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
        <script src="https://cdn.jsdelivr.net/gh/webfuse-com/D2Snap@main/dist/api.browser.js"></script>
    </head>
    <body data-sveltekit-preload-data="hover">
        <div>
            <button id="btn1" onclick="alert('Button 1 clicked')">
                <span> Button 1 </span>
            </button>
        </div>
    </body>
    <script>
        // D2Snap exposes: d2Snap and adaptiveD2Snap functions
        // d2Snap(dom, k, l, m, options) - manual compression levels
        // adaptiveD2Snap(dom, maxTokens, maxIterations, options) - automatic compression

        async function test() {
            // Using adaptiveD2Snap for automatic compression
            const result = await D2Snap.adaptiveD2Snap(
                document.body,
                14096,
                5,
                {
                    assignUniqueIDs: true,
                    debug: false,
                    keepUnknownElements: true,
                    skipMarkdownTranslation: false,
                }
            );

            console.log("Compressed HTML:", result.serializedHtml);

            // Or using d2Snap with manual levels (k, l, m)
            const result2 = await D2Snap.d2Snap(document.body, 0, 0, 0);
            console.log("Manual compression:", result2);
        }

        test();
    </script>
</html>
